<!DOCTYPE html>
<html
  lang="en"
  xmlns:th="http://www.thymeleaf.org"
  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  layout:decorate="~{layout/layout}"
>
  <head>
    <title>Board Detail</title>
  </head>
  <body>
    <div layout:fragment="content">
      <div class="container-sm mt-5">
        <h3>Board Detail</h3>

        <form action="/board/modify" method="post" id="modForm">
          <input type="hidden" name="bno" th:value="${boardVO.bno}" />

          <div class="mb-3">
            <label class="form-label">Title</label>
            <input
              type="text"
              class="form-control"
              th:value="${boardVO.title}"
              name="title"
              id="title"
              readonly
            />
          </div>
          <div class="mb-3">
            <label class="form-label">Writer</label>
            <input
              type="text"
              class="form-control"
              th:value="${boardVO.writer}"
              name="writer"
              id="writer"
              readonly
            />
          </div>
          <div class="mb-3">
            <label class="form-label">Content</label>
            <textarea
              class="form-control"
              rows="3"
              th:text="${boardVO.content}"
              name="content"
              id="content"
              readonly
            ></textarea>
          </div>
          <div class="mb-3">
            <label class="form-label">Reg Date</label>
            <input
              type="text"
              class="form-control"
              th:value="${boardVO.regDate}"
              readonly
            />
          </div>
        </form>

        <a href="/board/list" class="btn btn-secondary">List</a>

        <!-- Modify/Delete buttons only for Writer or Admin -->
        <th:block sec:authorize="isAuthenticated()">
          <th:block
            th:if="${#authentication.name == boardVO.writer} or ${#authorization.expression('hasRole(''ADMIN'')')}"
          >
            <button type="button" id="modBtn" class="btn btn-warning">
              Modify
            </button>
            <button type="button" id="delBtn" class="btn btn-danger">
              Delete
            </button>
          </th:block>
        </th:block>
        <button
          type="button"
          id="subBtn"
          class="btn btn-primary"
          style="display: none"
        >
          Submit
        </button>
        <script th:src="@{/js/boardModify.js}"></script>
      </div>
    </div>
  </body>
</html>
